---
title: "WP-TOC: Най-леката Table of Contents за WordPress"
keywords: ["WP-TOC", "WordPress Table of Contents", "table of contents plugin", "WordPress плъгин", "WP разработка", "WordPress SEO", "автоматично съдържание", "лек WordPress плъгин", "Stanchev WP-TOC"]
summary: "Как за един ден създадох WP-TOC – минималистичен и бърз плъгин за автоматично съдържание в WordPress."
author: "Станчев"
publishedAt: "2025-10-28"
tag: "WordPress Development"
image: /images/posts/wp-toc-plugin.jpg
---

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "WP-TOC: Най-леката Table of Contents за WordPress",
  "description": "Историята на създаването на WP-TOC – минималистичен и бърз плъгин за автоматично съдържание в WordPress, разработен само за един ден.",
  "author": { "@type": "Person", "name": "Станчев" },
  "publisher": { "@type": "Organization", "name": "Stanchev Digital" },
  "datePublished": "2025-10-28"
}
</script>

<strong>WP-TOC</strong> се роди от една наглед обикновена поръчка, която се превърна в техническо предизвикателство и удоволствие за решаване. Клиентът се свърза с мен с конкретна болка — всички налични Table of Contents плъгини за WordPress бяха прекалено тежки, натоварваха DOM-а, вкарваха jQuery или бяха ограничени до определени теми. „Искам нещо, което просто работи,“ каза той. „Без панели с настройки, без скрити опции, без ненужен CSS. Само плъгин, който знае кога и къде да се появи.“

Това беше моментът, в който идеята за <strong>WP-TOC</strong> започна да се оформя — минималистичен плъгин, който не се опитва да бъде „по-добър“ от другите, а просто по-чист. Без зависимости, без скриптове от трети страни, без нужда от визуален интерфейс. Всичко да се случва тихо и интелигентно, още при зареждането на съдържанието.

Идеята беше една: <strong>автоматично, леко и невидимо Table of Contents решение</strong>, което не нарушава структурата на публикацията, а я прави по-достъпна и удобна — както за читателя, така и за търсачките.

Поръчката дойде днес сутринта — от онези съобщения, които започват с „Имам нещо малко, но спешно.“ Клиентът беше прекарал предишната седмица в тестване на поне пет различни TOC решения от WordPress репозиторито. Всички изглеждаха добре на пръв поглед, но след инсталация се оказваха или прекалено бавни, или твърде натоварващи за страниците. Някои добавяха по 200 KB ненужен JavaScript, други зареждаха по няколко CSS файла, а трети просто чупеха структурата на съдържанието при custom теми.

Той искаше нещо различно — <strong>плъгин, който се интегрира естествено</strong>, без панел за настройки, без тежък UI, без конфликти. Да може да постави Table of Contents във всеки пост автоматично, без shortcode, без блокове и без да се тревожи дали ще изглежда „добре“. Просто функционално, минималистично, и най-важното — <strong>бързо</strong>.

Тази конкретика ми хареса. Когато някой знае какво иска — скорост, чистота и автоматизация — решението винаги идва бързо. В този случай, идеята за <strong>WP-TOC</strong> се оформи още преди да съм затворил имейла.  

<h2>Идеята</h2>

<strong>WP-TOC</strong> анализира съдържанието и вмъква списък от заглавия преди първия <code>&lt;h2&gt;</code>.  
Използва само един WordPress hook:  

```php
add_filter('the_content', function($content) {
  if (is_singular() && strpos($content, '<h2') !== false) {
    $toc = '<div id="wp-toc"><ul></ul></div>';
    return preg_replace('/(<h2[^>]*>)/', $toc . '$1', $content, 1);
  }
  return $content;
});
```

<h2>Резултатът</h2>
За по-малко от 9 часа – готов, лек и функционален плъгин.
<strong>WP-TOC</strong> вече е open-source в GitHub и може да се интегрира с всяка тема.
Без настройки. Без конфигурация. Само чист код.

<Feedback title="Поуката" description="Понякога най-добрите WordPress решения се раждат от нуждата за простота. WP-TOC е точно такъв проект – създаден за скорост и яснота." />

<h2 id="process">Процесът на разработка</h2>

<strong>Планиране (1 час):</strong>  
Първо дефинирах логиката – автоматично парсване на заглавията и вмъкване преди първия H2.  
Записах 3 основни правила:
1. Без външни зависимости  
2. Малки админ настройки  
3. Под 10 KB общ размер  

<h2 id="tech-details">Техническа реализация и архитектура</h2>

След като определих целта — <strong>лек, автоматичен и беззависим Table of Contents плъгин</strong> — започнах да изграждам архитектурата около три прости принципа:

<strong>Без jQuery или външни библиотеки</strong>

<strong>Минимално DOM взаимодействие</strong>

<strong>Пълна съвместимост с всички билдъри</strong>

Плъгинът сканира съдържанието на публикацията, идентифицира всички H1–H6 заглавия и автоматично генерира Table of Contents преди първия H2. Всяка секция получава anchor с хеш линк, а фронтенд частта използва <code>IntersectionObserver</code> за „жив“ scroll spy и плавна навигация.

<strong>Основни функционалности:</strong>

- Автоматично генериране на TOC от H1–H6
- Опция за автоматично вмъкване по тип публикация или чрез shortcode/widget
- Поддръжка на плавно скролиране и йерархична структура
- Вграден брояч (вътрешен или външен)
- Sticky TOC widget с toggle бутон
- Пълна съвместимост с Classic Editor, Gutenberg, Elementor, Divi и WPBakery
- Напълно преводим (translation-ready), включително възможност за принудителен език в админ панела

<h3 id="installation">Инсталация и употреба</h3>

1. Качи плъгина в <code>wp-content/plugins/wp-toc/</code> или инсталирай чрез WordPress Admin → Plugins.
2. Активирай го.
3. Отвори <strong>Settings → Table of Contents</strong>, за да конфигурираш опциите.

<strong>Начини за използване:</strong>

- Автоматично вмъкване: Settings → Table of Contents → General → Auto Insert

Shortcode: <code>[wp-toc]</code>

- Sticky widget: Appearance → Widgets → TOC Sticky

<h4>Shortcode параметри:</h4>

```php
[wp-toc 
  header_label="Title" 
  display_header_label="no" 
  toggle_view="no" 
  initial_view="hide|show" 
  display_counter="no" 
  heading_levels="2,3" 
  class="custom_toc"
]
```
<h3 id="localization">Локализация</h3>

- Text domain: <code>wp-table-of-contents</code>
- Преводи: постави .mo/.po файлове в директорията <code>languages/</code>
- Принудителен език на админ интерфейса: Settings → Table of Contents → General → Plugin UI Language

<Feedback title="Философия на кода" description="Всяка функция е написана с идеята за предвидимост и стабилност. Никакви магии – само логичен, четим и оптимизиран код, който можеш да разбереш за минути." />

<strong>Тестване (2 часа):</strong>  
Пробвах го с класически теми (Twenty Twenty-Four, Astra) и headless среда с Next.js.  
Резултатът: стабилно, мигновено зареждане без конфликти.

<Feedback
  title="Оптимизация в реално време"
  description="Вместо да добавям кеш или компресия, оптимизацията беше в самия код — минимално DOM взаимодействие и почти нулев footprint."
/>

<h2 id="why-important">Защо е важно едно леко Table of Contents решение</h2>

<Table
  data={{
    headers: [
      { content: "Критерий", key: "criterion" },
      { content: "Тежки TOC плъгини", key: "heavy" },
      { content: "WP-TOC", key: "wptoc" }
    ],
    rows: [
      ["Размер на скриптовете", "100–300 KB", "под 9 KB"],
      ["Зависимости", "jQuery, lodash", "Никакви"],
      ["Рендиране", "След DOM load", "Сървърно + JS за обновяване"],
      ["Скорост на зареждане", "Видима латентност", "Незабавно"],
      ["Поддръжка", "Чести конфликти с теми", "Универсална съвместимост"]
    ]
  }}
/>

<Feedback
  title="Скорост и UX"
  description="Едно TOC, което се зарежда мигновено, подобрява UX и SEO едновременно — Google оценява чиста структура и достъпност."
/>

<h2 id="performance">Производителност и ефективност</h2>

<PieChart
  title="Разпределение на времето за разработка"
  data={[
    { label: "Планиране", value: 10 },
    { label: "Кодиране", value: 65 },
    { label: "Тестване и оптимизация", value: 25 }
  ]}
  nameKey="label"
  valueKey="value"
/>

<strong>WP-TOC</strong> е пример как правилната архитектура елиминира нуждата от оптимизация след това.  
Когато кодът е структуриран чисто, скоростта идва естествено.

<p>
  Може да разгледате кода тук:
  <a href="https://github.com/stantchev/WP-TOC" target="_blank" rel="noopener noreferrer">
    WP-TOC в GitHub →
  </a>
</p>
<hr />

<strong>WP-TOC</strong> е пример, че ефективният код не се мери по редове, а по това колко незабележимо подобрява преживяването.
<p>Ако и ти искаш <a href="https://stanchev.bg/web/custom-plagini"><strong>custom WordPress плъгин</strong></a>, който е бърз, лек и създаден точно за твоя проект — пиши ми и ще го направим да просто работи.</p>
